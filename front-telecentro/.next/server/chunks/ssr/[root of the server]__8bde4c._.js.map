{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/config_client.ts"],"sourcesContent":["\nconst config = {\n    BACKEND: process.env.BACKEND || 'server-telecentro-224237244779.us-central1.run.app:443',\n    SYSTEMPROMPT: `\n## ACTO I: PERSONA Y OBJETIVO\nSos Juan, un asistente de IA para los ingenieros de campo de Telecentro. Tu personalidad es amable, empática y extremadamente enfocada en la tarea. Hablas siempre en español.\nTu único objetivo es ayudar al técnico a registrar la información de los equipos que instala. No respondas a ninguna pregunta que no esté relacionada con esta tarea; simplemente indica que no estás capacitado para ello.\n\n## ACTO II: TAREA Y FLUJO DE TRABAJO\nTu tarea consiste en seguir estos pasos de forma rigurosa:\n1.  **Observar el Video**: El técnico te mostrará un equipo a través de la cámara.\n2.  **Identificar Etiquetas**: Debes buscar visualmente las etiquetas amarillas en el equipo.\n3.  **Extraer Texto**: Por cada etiqueta amarilla, debes leer y extraer el texto que contiene. Si la imagen no es clara, debes guiar al técnico con amabilidad para que enfoque mejor la cámara. Por ejemplo: \"Por favor, ¿podrías acercar un poco más la cámara a la etiqueta amarilla de la derecha? No logro leerla bien.\"\n4.  **Registrar con Herramienta**: Una vez que hayas identificado y leído claramente el texto de una etiqueta, **debes** invocar inmediatamente la herramienta 'write_text'. El único parámetro para esta herramienta es el texto que extrajiste. No confirmes en voz alta el texto antes de usar la herramienta, simplemente úsala.\n\n## ACTO III: REGLAS IMPORTANTES\n-   **Prioridad de Herramienta**: Tu acción principal es llamar a la función 'write_text'. Evita las respuestas conversacionales cuando el objetivo es registrar datos.\n-   **Una herramienta por etiqueta**: Llama a la herramienta 'write_text' una vez por cada texto de etiqueta que identifiques. Si un equipo tiene tres etiquetas, llamarás a la herramienta tres veces, una para cada una.\n-   **No inventes información**: Si no puedes leer una etiqueta, pide una mejor vista. No intentes adivinar el contenido.\n    `\n}\n\nexport default config;"],"names":[],"mappings":";;;AACA,MAAM,SAAS;IACX,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IAChC,cAAc,CAAC;;;;;;;;;;;;;;;;IAgBf,CAAC;AACL;uCAEe"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/lib/utils.ts"],"sourcesContent":["export function cn(...classes: (string | false | undefined | null)[]): string {\n  return classes.filter(Boolean).join(\" \");\n}\n\nexport const float32ToPcm16 = (float32Array: Float32Array) => {\n  const pcm16 = new Int16Array(float32Array.length);\n  for (let i = 0; i < float32Array.length; i++) {\n    const s = Math.max(-1, Math.min(1, float32Array[i]));\n    pcm16[i] = s < 0 ? s * 0x8000 : s * 0x7fff;\n  }\n  return pcm16;\n};\n\n// Utility function to convert base64 to Float32Array\nexport const base64ToFloat32Array = (base64: string) => {\n  const binary = atob(base64);\n  const bytes = new Uint8Array(binary.length);\n  for (let i = 0; i < binary.length; i++) {\n    bytes[i] = binary.charCodeAt(i);\n  }\n  // Convert to 16-bit PCM\n  const pcm16 = new Int16Array(bytes.buffer);\n  // Convert to float32\n  const float32 = new Float32Array(pcm16.length);\n  for (let i = 0; i < pcm16.length; i++) {\n    float32[i] = pcm16[i] / 32768.0;\n  }\n  return float32;\n};\n"],"names":[],"mappings":";;;;;AAAO,SAAS,GAAG,GAAG,OAA8C;IAClE,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACtC;AAEO,MAAM,iBAAiB,CAAC;IAC7B,MAAM,QAAQ,IAAI,WAAW,aAAa,MAAM;IAChD,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,MAAM,EAAE,IAAK;QAC5C,MAAM,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,YAAY,CAAC,EAAE;QAClD,KAAK,CAAC,EAAE,GAAG,IAAI,IAAI,IAAI,SAAS,IAAI;IACtC;IACA,OAAO;AACT;AAGO,MAAM,uBAAuB,CAAC;IACnC,MAAM,SAAS,KAAK;IACpB,MAAM,QAAQ,IAAI,WAAW,OAAO,MAAM;IAC1C,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;QACtC,KAAK,CAAC,EAAE,GAAG,OAAO,UAAU,CAAC;IAC/B;IACA,wBAAwB;IACxB,MAAM,QAAQ,IAAI,WAAW,MAAM,MAAM;IACzC,qBAAqB;IACrB,MAAM,UAAU,IAAI,aAAa,MAAM,MAAM;IAC7C,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;QACrC,OAAO,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,GAAG;IAC1B;IACA,OAAO;AACT"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,sMAAM,UAAU,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,yDACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,sMAAM,UAAU,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,sMAAM,UAAU,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,sMAAM,UAAU,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        blue: \"bg-blue-600 text-primary-foreground shadow hover:bg-blue-600/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AAEA;AAHA;;;;;;AAKA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,MAAM;YACN,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,sMAAM,UAAU,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,2KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,sMAAM,UAAU,CAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,sMAAM,UAAU,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectItem,\n  SelectLabel,\n  SelectSeparator,\n} "],"names":[],"mappings":";;;;;;;;;;;AAEA;AAIA;AAHA;AACA;AAAA;AAJA;;;;;;AAQA,MAAM,SAAS,mKAAgB,IAAI;AAEnC,MAAM,cAAc,mKAAgB,KAAK;AAEzC,MAAM,cAAc,mKAAgB,KAAK;AAEzC,MAAM,8BAAgB,sMAAM,UAAU,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,mKAAgB,OAAO;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,6RACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,mKAAgB,IAAI;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,mKAAgB,OAAO,CAAC,WAAW;AAE/D,MAAM,8BAAgB,sMAAM,UAAU,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,8OAAC,mKAAgB,MAAM;kBACrB,cAAA,8OAAC,mKAAgB,OAAO;YACtB,KAAK;YACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,8bACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;sBAET,cAAA,8OAAC,mKAAgB,QAAQ;gBACvB,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,OACA,aAAa,YACX;0BAGH;;;;;;;;;;;;;;;;AAKT,cAAc,WAAW,GAAG,mKAAgB,OAAO,CAAC,WAAW;AAE/D,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,mKAAgB,IAAI;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,6NACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mKAAgB,aAAa;8BAC5B,cAAA,8OAAC,oMAAA,CAAA,QAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,8OAAC,mKAAgB,QAAQ;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,mKAAgB,IAAI,CAAC,WAAW;AAEzD,MAAM,4BAAc,sMAAM,UAAU,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,mKAAgB,KAAK;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,0CAA0C;QACvD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAgB,KAAK,CAAC,WAAW;AAE3D,MAAM,gCAAkB,sMAAM,UAAU,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,mKAAgB,SAAS;QACxB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG,mKAAgB,SAAS,CAAC,WAAW"}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea } "],"names":[],"mappings":";;;;AAAA;AACA;;;;AAKA,MAAM,yBAAW,sMAAM,UAAU,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator className={cn(\"flex items-center justify-center text-current\")}>\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox } "],"names":[],"mappings":";;;;AAAA;AAGA;AAFA;AACA;;;;;;AAGA,MAAM,yBAAW,sMAAM,UAAU,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qKAAkB,IAAI;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,qKAAkB,SAAS;YAAC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE;sBACzC,cAAA,8OAAC,oMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,qKAAkB,IAAI,CAAC,WAAW"}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 503, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cn } from \"@/lib/utils\"\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\n      className\n    )}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label } "],"names":[],"mappings":";;;;AAAA;AAEA;AADA;;;;;AAGA,MAAM,sBAAQ,sMAAM,UAAU,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAe,IAAI;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,kKAAe,IAAI,CAAC,WAAW"}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 531, "column": 0}, "map": {"version":3,"sources":["file:///home/user/genai-demos/voice-ai/front-telecentro/components/gemini-playground.tsx"],"sourcesContent":["\"use client\";\n\nimport configClient from \"@/config_client\";\nimport React, {\n  useState,\n  useRef,\n  useEffect,\n} from \"react\";\nimport { Mic, StopCircle } from \"lucide-react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\n\nimport { base64ToFloat32Array } from \"@/lib/utils\";\n\n\n/**\n * Generates a random UUID (RFC4122).\n * @returns A string representing a UUID.\n */\nfunction generateUUID(): string {\n  let d = new Date().getTime();\n  let d2 =\n    (typeof performance !== \"undefined\" &&\n      performance.now &&\n      performance.now() * 1000) ||\n    0;\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    let r = Math.random() * 16;\n    if (d > 0) {\n      r = (d + r) % 16 | 0;\n      d = Math.floor(d / 16);\n    } else {\n      r = (d2 + r) % 16 | 0;\n      d2 = Math.floor(d2 / 16);\n    }\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n// Example: const DOMAIN = \"localhost:8082\";\nconst DOMAIN = configClient.BACKEND;\nconst WSS = DOMAIN.includes(\"localhost\") ? \"ws\" : \"wss\";\n\ninterface ToolFunctionDeclaration {\n  name: string;\n  description: string;\n  parameters: {\n    type: string;\n    properties: {\n      [key: string]: { type: string };\n    };\n    required: string[];\n  };\n}\n\ninterface Config {\n  systemPrompt: string;\n  googleSearch: boolean;\n  allowInterruptions: boolean;\n  tools: {\n    function_declarations: ToolFunctionDeclaration[];\n  }[];\n}\n\n/**\n * Simple enum for Gemini call state:\n * - Idle: Not connected or waiting\n * - Listening: The user is speaking, AI is listening\n * - Speaking: The AI is responding\n * - Interrupted: The AI was interrupted by a barge-in\n */\nenum GeminiState {\n  Idle = \"Inactivo\",\n  Listening = \"Escuchando\",\n  Speaking = \"Hablando\",\n  Interrupted = \"Interrumpido\",\n}\n\n/**\n * This component manages a real-time audio (and optional video) call\n * with an AI assistant named \"Ben\". It sets up a WebSocket connection\n * and handles streaming audio to/from the server (Gemini).\n */\nexport default function GeminiVoiceChat() {\n  // =========================================================================\n  // States & Refs\n  // =========================================================================\n\n  // WebSocket connection states\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n\n  // AI readiness and errors\n  const [geminiReady, setGeminiReady] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Displayed texts\n  const [toolText, setToolText] = useState(\"\");\n  const [userTypingText, setUserTypingText] = useState(\"\");\n  const [conversationText, setConversationText] = useState(\"\");\n  const [assistantResponseText, setAssistantResponseText] = useState(\"\");\n\n  var contadorHistoria = 0;\n\n  // Gemini call state\n  const [geminiState, setGeminiState] = useState<GeminiState>(GeminiState.Idle);\n  const geminiStateRef = useRef<GeminiState>(GeminiState.Idle);\n  useEffect(() => {\n    geminiStateRef.current = geminiState;\n     \n  }, [geminiState]);\n\n  /**\n   * Logs and updates the Gemini state, for debugging.\n   * @param newState The new Gemini state to be set.\n   */\n  const setGeminiStateWithLog = (newState: GeminiState) => {\n    console.log(`[GeminiState] ${geminiStateRef.current} -> ${newState}`);\n    setGeminiState(newState);\n  };\n\n   \n\n  \n\n  // Config for the AI system\n  const [config, setConfig] = useState<Config>({\n    systemPrompt: configClient.SYSTEMPROMPT,\n    googleSearch: false,\n    allowInterruptions: true,\n    tools: [\n      {\n        function_declarations: [\n          {\n            name: \"write_text\",\n            description:\n              \"When you want to place some text in the UI explicitly. Use Line Breaks where appropriate to make it more readable.\",\n            parameters: {\n              type: \"object\",\n              properties: {\n                text: { type: \"string\" },\n              },\n              required: [\"text\"],\n            },\n           \n          }\n        ],\n      },\n    ],\n  });\n\n  \n\n  // WebSocket reference\n  const wsRef = useRef<WebSocket | null>(null);\n\n   \n   \n\n  // Unique client ID\n  const clientId = useRef<string>(generateUUID());\n\n  // Reflect geminiReady in a ref\n  const geminiReadyRef = useRef(false);\n  useEffect(() => {\n    geminiReadyRef.current = geminiReady;\n  }, [geminiReady]);\n\n  // =========================================================================\n  // Device Selections\n  // =========================================================================\n   \n   \n\n  const [cameraDevices, setCameraDevices] = useState<\n    { deviceId: string; label: string }[]\n  >([]);\n  const [selectedCameraDeviceId, setSelectedCameraDeviceId] = useState<\n    string | null\n  >(null);\n\n  \n\n  // Video state\n  const [videoEnabled, setVideoEnabled] = useState(false);\n  const [isDetectingDevices, setIsDetectingDevices] = useState(true);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n \n\n   \n  // Keep track of the MediaStream and interval for video frames\n  const videoStreamRef = useRef<MediaStream | null>(null);\n  const videoIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // =========================================================================\n  // Enumerate Devices on Mount\n  // =========================================================================\n  useEffect(() => {\n    setIsDetectingDevices(true);\n\n    // First request permissions\n    const requestPermissions = async () => {\n      try {\n        await navigator.mediaDevices\n          .getUserMedia({ video: true })\n          .then((stream) => {\n            // Stop the stream immediately after getting permissions\n            stream.getTracks().forEach((track) => track.stop());\n          })\n          .catch((err) => {\n            console.warn(\"[Permissions] Video permission denied:\", err);\n            // Still try to get audio-only permissions\n            return navigator.mediaDevices.getUserMedia({ audio: true });\n          })\n          .then((stream) => {\n            if (stream) {\n              stream.getTracks().forEach((track) => track.stop());\n            }\n          })\n          .catch((err) => {\n            console.error(\"[Permissions] Audio permission denied:\", err);\n            setError(\n              \"Please grant microphone permissions to use the voice chat.\"\n            );\n          });\n      } catch (err: any) {\n        console.error(\"[Permissions] Error:\", err);\n        setError(\"Media permissions are required: \" + err.message);\n      }\n    };\n\n    // Then enumerate devices\n    const enumerateDevices = async () => {\n      try {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n\n        \n\n        // Cameras\n        const videoInputs = devices.filter((d) => d.kind === \"videoinput\");\n        const cams = videoInputs\n          .filter((d) => d.deviceId !== \"\")\n          .map((d: MediaDeviceInfo) => ({\n            deviceId: d.deviceId,\n            label: d.label || \"Unnamed Camera\",\n          }));\n        setCameraDevices(cams);\n\n       \n        \n        if (cams.length > 0) {\n          setSelectedCameraDeviceId(cams[0].deviceId);\n        }\n\n         \n      } catch (err: any) {\n        console.error(\"[enumerateDevices] Error:\", err);\n        setError(\"[enumerateDevices] \" + err.message);\n      }\n    };\n\n    // Execute both in sequence\n    requestPermissions()\n      .then(enumerateDevices)\n      .finally(() => {\n        setIsDetectingDevices(false);\n      });\n\n    // Set up device change listener\n    navigator.mediaDevices.addEventListener(\"devicechange\", enumerateDevices);\n    return () => {\n      navigator.mediaDevices.removeEventListener(\n        \"devicechange\",\n        enumerateDevices\n      );\n    };\n  }, []);\n\n  // Disable start button if no microphone\n  const canStartCall = true;\n\n  // =========================================================================\n  // Start / Stop Call\n  // =========================================================================\n\n  /**\n   * Initiates the voice call with the server by:\n   * 1. Opening a WebSocket to the backend.\n   * 2. Sending initial config.\n   * 3. Starting the audio stream.\n   */\n  const startCall = async () => {\n    try {\n\n      setIsConnecting(true);\n\n      // Prevent double connections\n      if (\n        wsRef.current &&\n        (wsRef.current.readyState === WebSocket.OPEN ||\n          wsRef.current.readyState === WebSocket.CONNECTING)\n      ) {\n        console.warn(\"[startCall] WebSocket already open/connecting\");\n        return;\n      }\n\n      // Create the WS URL: wss://DOMAIN/ws/CLIENT_ID\n      wsRef.current = new WebSocket(\n        `${WSS}://${DOMAIN}/ws/${clientId.current}`\n      );\n\n      wsRef.current.onopen = async () => {\n        console.log(\"[WS:onopen] Sending initial config to server...\");\n        wsRef.current?.send(\n          JSON.stringify({\n            type: \"config\",\n            config: config,\n          })\n        );\n\n        setToolText(\"\");\n        // No iniciar el stream de audio, ya que no queremos manejar audio.\n        // await startAudioStream();\n\n        setIsStreaming(true);\n        setGeminiReady(true);\n        \n      };\n\n      wsRef.current.onmessage = (event) => {\n        handleServerMessage(event);\n      };\n\n      wsRef.current.onerror = (evt: Event) => {\n        console.error(\"[WS:onerror]\", evt);\n        setError(\"[WebSocket:onerror] Unknown error occurred.\");\n      };\n\n      wsRef.current.onclose = (evt) => {\n        console.warn(\"[WS:onclose]\", evt.code, evt.reason);\n        stopCall();\n      };\n    } catch (err: any) {\n      console.error(\"[startCall] Error:\", err);\n      setError(\"[startCall] \" + err.message);\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  /**\n   * Safely cleans up and terminates the call:\n   * 1. Stops microphone input.\n   * 2. Stops video (if any).\n   * 3. Closes the AudioContext.\n   * 4. Closes the WebSocket connection.\n   * 5. Resets local state.\n   */\n  const stopCall = () => {\n     \n    // Stop video\n    stopVideoStream();\n\n    // Close WebSocket\n    if (wsRef.current) {\n      try {\n        if (wsRef.current.readyState === WebSocket.OPEN) {\n          wsRef.current.close();\n        }\n      } catch (err) {\n        console.error(\"[stopCall] Error closing WebSocket:\", err);\n      } finally {\n        wsRef.current = null;\n      }\n    }\n\n \n\n  \n\n    // Clear texts\n    setToolText(\"\");\n    setUserTypingText(\"\");\n    setConversationText(\"\");\n    setAssistantResponseText(\"\");\n    setError(null);\n\n    // State resets\n    setIsStreaming(false);\n    setGeminiReady(false);\n    setGeminiState(GeminiState.Idle);\n  };\n\n  // =========================================================================\n  // Handle Incoming Messages from Server\n  // =========================================================================\n\n  /**\n   * Handles WebSocket messages from the server. These messages can include:\n   * - `gemini_ready`: indicates AI is ready.\n   * - `audio`: TTS audio data.\n   * - `text` or `tool_text`: text appended to conversation or tools output.\n   * - `end_call`: signals the AI wants to end the call.\n   * - `serverContent`: advanced usage with possible inline audio data chunks.\n   * @param event The WebSocket message event.\n   */\n  const handleServerMessage = async (event: MessageEvent) => {\n    try {\n      let response;\n      if (event.data instanceof Blob) {\n        const text = await event.data.text();\n        response = JSON.parse(text);\n      } else {\n        response = JSON.parse(event.data);\n      }\n\n      switch (response.type) {\n        case \"gemini_ready\":\n          setGeminiReady(true);\n          setGeminiStateWithLog(GeminiState.Listening);\n          break;\n\n         \n\n        case \"text\":\n          // Append server text to the dedicated assistant response area\n          contadorHistoria = contadorHistoria + 1;\n          if (contadorHistoria < 5)\n           { \n            setAssistantResponseText((prev) => prev + response.data); }\n           else { \n            setAssistantResponseText(response.data);\n            contadorHistoria = 0;\n           }\n           \n          break;\n\n        case \"tool_text\":\n          setToolText(\"\" + response.data);\n          alert(\"Tool text\" + response.data);\n          break;\n\n        case \"end_call\":\n          // AI requested to end the call\n          setToolText(\"ENDING CALL: \" + response.data);\n          setTimeout(() => {\n            stopCall();\n          }, 5000); // 5 second delay\n          break;\n        \n        case \"turn_complete\":\n          // El backend ha finalizado su turno, volvemos a escuchar.\n          setGeminiStateWithLog(GeminiState.Listening);\n          break;\n\n        case \"cargar_ticket\":\n              // AI requested to end the call\n              setToolText(\"Cargar Ticket: \" + response.data);\n              break;    \n\n        case \"serverContent\":\n          // Possibly advanced usage\n          if (response.serverContent.interrupted) {\n            handleInterruption();\n            return;\n          }\n\n          if (response.serverContent.modelTurn?.parts?.[0]?.inlineData) {\n            const textData =\n              response.serverContent.modelTurn.parts[0].inlineData.data;\n            alert(textData);\n            // Audio playback is disabled as per user request.\n            // if (geminiState !== GeminiState.Speaking) {\n            //   setGeminiStateWithLog(GeminiState.Speaking);\n            // }\n            // enqueueAudio(base64ToFloat32Array(audioData));\n          }\n\n          if (response.serverContent.turnComplete) {\n            setGeminiStateWithLog(GeminiState.Listening);\n          }\n          break;\n\n        default:\n          console.log(\"[WS:onmessage] Unhandled type:\", response.type);\n          break;\n      }\n    } catch (err) {\n      console.error(\"[onmessage] parse error:\", err);\n    }\n  };\n\n  /**\n   * Handles a barge-in scenario (user interrupting AI).\n   */\n  const handleInterruption = () => {\n    console.warn(\"[handleInterruption] Barge-in detected\");\n    setGeminiStateWithLog(GeminiState.Interrupted);\n  };\n\n  // =========================================================================\n  // Turn Management: continue or end\n  // =========================================================================\n\n  /**\n   * Sends a \"continue\" signal to prompt the AI to continue sending TTS audio.\n   */\n  const sendContinueSignal = () => {\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) return;\n    const msg = {\n      client_content: {\n        turns: [{ role: \"user\", parts: [] }],\n        turn_complete: false,\n      },\n    };\n    wsRef.current.send(JSON.stringify({ type: \"continue\", data: msg }));\n  };\n\n  /**\n   * Sends a \"end\" message to finalize the current user turn (text input).\n   */\n  const sendEndMessage = () => {\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) return;\n    const msg = {\n      client_content: {\n        turns: [{ role: \"user\", parts: [] }],\n        turn_complete: true,\n      },\n    };\n    wsRef.current.send(JSON.stringify({ type: \"end\", data: msg }));\n  };\n\n  /**\n   * Sends the user's typed text to the backend.\n   */\n  const sendText = () => {\n    if (\n      !wsRef.current ||\n      wsRef.current.readyState !== WebSocket.OPEN ||\n      !userTypingText.trim()\n    ) {\n      return; // No enviar si no hay conexión o el texto está vacío\n    }\n\n    console.log(`[sendText] Sending: \"${userTypingText}\"`);\n    wsRef.current.send(\n      JSON.stringify({\n        type: \"text\",\n        data: userTypingText,\n      })\n    );\n    setConversationText(`${conversationText}  User: ${userTypingText}`)\n    setUserTypingText(\"\"); // Limpiar el área de texto después de enviar\n  };\n    \n\n    \n\n  // =========================================================================\n  // Video handling (optional)\n  // =========================================================================\n\n  // Enable or disable video feed when streaming toggles\n  useEffect(() => {\n    if (!isStreaming) {\n      stopVideoStream();\n      return;\n    }\n    if (videoEnabled) {\n      startVideoStream();\n    } else {\n      stopVideoStream();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [videoEnabled]);\n\n  // Restart video stream if camera device changes mid-call\n  useEffect(() => {\n    if (isStreaming && videoEnabled) {\n      stopVideoStream();\n      startVideoStream();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedCameraDeviceId]);\n\n  /**\n   * Starts the video stream from the selected camera (if any) and sends frames.\n   */\n  const startVideoStream = async () => {\n    try {\n      stopVideoStream(); // Clear any existing\n      if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\n        console.warn(\"[startVideoStream] WS not open yet\");\n        return;\n      }\n\n      const constraints: MediaStreamConstraints = {\n        video: {\n          width: { ideal: 320 },\n          height: { ideal: 240 },\n        },\n      };\n      if (selectedCameraDeviceId) {\n        (constraints.video as MediaTrackConstraints).deviceId = {\n          exact: selectedCameraDeviceId,\n        };\n      }\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n      videoStreamRef.current = stream;\n\n      // Send frames every 1 second\n      videoIntervalRef.current = setInterval(() => {\n        captureAndSendFrame();\n      }, 1000);\n    } catch (err: any) {\n      console.error(\"[startVideoStream] error:\", err);\n      setError(\"[startVideoStream] \" + err.message);\n      setVideoEnabled(false);\n    }\n  };\n\n  /**\n   * Stops the current video stream and interval.\n   */\n  const stopVideoStream = () => {\n    if (videoStreamRef.current) {\n      try {\n        videoStreamRef.current.getTracks().forEach((track) => {\n          track.stop();\n          track.enabled = false;\n        });\n      } catch (err) {\n        console.error(\"[stopVideoStream] Error stopping tracks:\", err);\n      }\n      videoStreamRef.current = null;\n    }\n    if (videoIntervalRef.current) {\n      clearInterval(videoIntervalRef.current);\n      videoIntervalRef.current = null;\n    }\n    if (videoRef.current) {\n      try {\n        videoRef.current.srcObject = null;\n        videoRef.current.load();\n      } catch (err) {\n        console.error(\n          \"[stopVideoStream] Error cleaning up video element:\",\n          err\n        );\n      }\n    }\n  };\n\n  /**\n   * Captures the current video frame to a canvas, encodes as base64, and sends via WebSocket.\n   */\n  const captureAndSendFrame = () => {\n    if (!geminiReadyRef.current) return;\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) return;\n    if (!canvasRef.current || !videoRef.current) return;\n\n    const ctx = canvasRef.current.getContext(\"2d\");\n    if (!ctx) return;\n\n    canvasRef.current.width = videoRef.current.videoWidth;\n    canvasRef.current.height = videoRef.current.videoHeight;\n    ctx.drawImage(videoRef.current, 0, 0);\n    const base64Image = canvasRef.current\n      .toDataURL(\"image/jpeg\", 0.8)\n      .split(\",\")[1];\n\n    wsRef.current.send(\n      JSON.stringify({\n        type: \"image\",\n        data: base64Image,\n      })\n    );\n  };\n\n  \n\n  // =========================================================================\n  // Cleanup on Unmount\n  // =========================================================================\n  useEffect(() => {\n    return () => {\n      stopCall();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /**\n   * @returns true if the selected camera device label contains \"front\".\n   */\n  const isFrontFacingCamera = () => {\n    if (!selectedCameraDeviceId) return false;\n    const selectedCamera = cameraDevices.find(\n      (cam) => cam.deviceId === selectedCameraDeviceId\n    );\n    if (!selectedCamera) return false;\n    return /front/i.test(selectedCamera.label);\n  };\n\n  // =========================================================================\n  // Render\n  // =========================================================================\n  return (\n    <div className=\"container mx-auto py-8 px-4\">\n    \n\n      {/* HEADLINE */}\n      <div className=\"flex items-center justify-between\">\n        \n        <div className=\"flex items-center gap-3\">\n          <img src=\"logo.png\" alt=\"Telecentro Logo\" className=\"h-10\"/>\n          <h1 className=\"text-3xl font-bold\">Field Service</h1>\n        </div>\n        {!isStreaming ? (\n          !isDetectingDevices ? (\n            <Button\n              onClick={startCall}\n              variant=\"blue\"\n              size=\"lg\"\n              className=\"px-6 py-4 text-xl font-semibold\"\n              disabled={isConnecting || !canStartCall}\n            >\n              <Mic\n                className={`mr-2 h-5 w-5 ${\n                  isConnecting ? \"animate-pulse\" : \"\"\n                }`}\n              />\n              {isConnecting ? \"Connecting...\" : \"Iniciar\"}\n            </Button>\n          ) : (\n            <div className=\"text-gray-500 animate-pulse\">\n              Detecting Media...\n            </div>\n          )\n        ) : (\n          <Button\n            onClick={stopCall}\n            variant=\"destructive\"\n            size=\"lg\"\n            className=\"px-6 py-4 text-xl font-semibold\"\n          >\n            <StopCircle className=\"mr-2 h-5 w-5\" />\n            Detener\n          </Button>\n        )}\n      </div>\n\n      {/* Quick Explanation */}\n      <p className=\"mt-2 mb-4\">\n        Este chat de voz en tiempo real usa Gemini!\n      </p>\n\n      {/* Error Alert */}\n      {error && (\n        <Alert variant=\"destructive\">\n          <AlertTitle>Error</AlertTitle>\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n      )}\n\n      {/* If in call, show mic indicator and text input */}\n      {isStreaming && (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center pt-6 mt-2 space-y-4\">\n            <Mic className=\"h-8 w-8 text-blue-500 animate-pulse\" />\n            <p className=\"text-gray-600\">\n              {geminiReady ? \"Call Ongoing...\" : \"Waiting...\"}\n            </p>\n\n            {/* GEMINI STATE INDICATOR */}\n            <div className=\"mb-4\">\n              {geminiState === GeminiState.Listening && (\n                <div className=\"text-green-600 font-semibold\">\n                  Gemini is listening...\n                </div>\n              )}\n              {geminiState === GeminiState.Speaking && (\n                <div className=\"text-blue-600 font-semibold\">\n                  Gemini is speaking...\n                </div>\n              )}\n              {geminiState === GeminiState.Interrupted && (\n                <div className=\"text-red-500 font-semibold\">\n                  Gemini was interrupted (barge-in)!\n                </div>\n              )}\n            </div>\n\n            {/* Input de texto para el usuario */}\n            <div className=\"w-full px-4\">\n              <Label htmlFor=\"user-text-input\" className=\"text-left w-full block mb-2\">\n                O escribe tu mensaje:\n              </Label>\n              <div className=\"flex gap-2\">\n                <Textarea\n                  id=\"user-text-input\"\n                  placeholder=\"Escribe aquí...\"\n                  value={userTypingText}\n                  onChange={(e) => setUserTypingText(e.target.value)}\n                  className=\"flex-grow\"\n                />\n                <Button onClick={sendText} disabled={!userTypingText.trim()}>\n                  Enviar\n                </Button>\n              </div>\n            </div>\n\n\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Video feed if enabled */}\n      {isStreaming && videoEnabled && (\n        <Card>\n          <CardContent className=\"pt-4 space-y-4\">\n            <div className=\"relative aspect-video bg-black rounded-lg overflow-hidden\">\n              <video\n                ref={videoRef}\n                autoPlay\n                playsInline\n                muted\n                width={320}\n                height={240}\n                className=\"w-full h-full object-contain\"\n                style={{\n                  transform: isFrontFacingCamera() ? \"scaleX(-1)\" : \"none\",\n                }}\n              />\n              <canvas\n                ref={canvasRef}\n                className=\"hidden\"\n                width={640}\n                height={480}\n              />\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Tool Text */}\n      {toolText && (\n        <Card className=\"mt-4\">\n          <CardContent className=\"pt-4\">\n            <h2 className=\"font-semibold mb-2\">Tool Output</h2>\n            <pre className=\"whitespace-pre-wrap\">{toolText}</pre>\n          </CardContent>\n        </Card>\n      )}\n      {/* Assistant Response Text */}\n      {assistantResponseText && (\n        <Card className=\"mt-4\">\n          <CardContent className=\"pt-4\">\n            <h2 className=\"font-semibold mb-2\">Respuesta del Asistente</h2>\n            <pre className=\"whitespace-pre-wrap text-gray-800 bg-gray-50 p-3 rounded-md\">\n              {assistantResponseText}\n            </pre>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Conversation */}\n      {conversationText && (\n        <Card className=\"mt-4\">\n          <CardContent className=\"pt-4\">\n            <h2 className=\"font-semibold mb-2\">Conversation</h2>\n            <pre className=\"whitespace-pre-wrap text-gray-700\">\n              {conversationText}\n            </pre>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Media Selection Card */}\n      <Card className=\"mt-6\">\n        <CardContent className=\"pt-6 space-y-4\">\n          <h2 className=\"text-xl font-semibold\">Seleccion de Media</h2>\n\n          {isDetectingDevices ? (\n            <div className=\"text-gray-500 animate-pulse\">\n              Detectando Media...\n            </div>\n          ) : (\n            <>\n               \n\n              {/* Camera + Video Toggle */}\n              <div className=\"flex items-center gap-4\">\n                <div className=\"flex-1\">\n                  <Label htmlFor=\"camera-select\">Camara</Label>\n                  <Select\n                    value={selectedCameraDeviceId || \"\"}\n                    onValueChange={(val) => setSelectedCameraDeviceId(val)}\n                    disabled={!cameraDevices.length}\n                  >\n                    <SelectTrigger id=\"camera-select\">\n                      <SelectValue placeholder=\"Select camera\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {cameraDevices.map((cam) => (\n                        <SelectItem key={cam.deviceId} value={cam.deviceId}>\n                          {cam.label || cam.deviceId}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Checkbox\n                    id=\"enable-video\"\n                    checked={videoEnabled}\n                    onCheckedChange={(checked) =>\n                      setVideoEnabled(Boolean(checked))\n                    }\n                    disabled={!isStreaming}\n                  />\n                  <Label htmlFor=\"enable-video\">Habilitar Video</Label>\n                </div>\n              </div>\n               \n            </>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1595, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}